import{k as _,r as i,l as k,c as s,a as e,m as x,d as P,t as r,F as h,i as f,o as l,n as N}from"./CzqWsblW.js";const A={class:"p-4"},B={key:0,class:"text-muted"},L={key:1},V={class:"mb-2"},w=["disabled"],C={key:0,class:"mt-4"},F={class:"table table-sm table-bordered mt-2 mb-0"},p="http://localhost:8080",E={__name:"assign",setup(I){const{$authFetch:m}=_(),o=i(null),b=i(!0),d=i(!1),n=i(null);async function g(){try{o.value=await m(p+"/periods/current")}catch(u){console.error(u)}finally{b.value=!1}}async function y(){var u;if((u=o.value)!=null&&u.id){d.value=!0,n.value=null;try{n.value=await m(`${p}/assign/${o.value.id}`,{method:"POST"})}catch(t){n.value="Fehler: "+t.message}finally{d.value=!1}}}return k(g),(u,t)=>{var v;return l(),s("div",A,[t[3]||(t[3]=e("h1",{class:"h4 mb-4"},"Kursvergabe starten",-1)),b.value?(l(),s("div",B,"Lade aktuelle Phase...")):(l(),s("div",L,[e("p",V,[t[0]||(t[0]=P(" Aktuelle Phase: ")),e("strong",null,r(((v=o.value)==null?void 0:v.name)||"Unbekannt"),1)]),e("button",{onClick:y,disabled:d.value,class:"btn btn-primary mb-4"},r(d.value?"Vergabe läuft...":"Kursvergabe starten"),9,w),n.value&&n.value.students?(l(),s("div",C,[t[2]||(t[2]=e("h2",{class:"h5 mb-3"},"Vergabeübersicht",-1)),(l(!0),s(h,null,f(n.value.students,c=>(l(),s("div",{key:c.studentName,class:"mb-4 border rounded p-3 bg-light"},[e("h5",null,r(c.studentName),1),e("table",F,[t[1]||(t[1]=e("thead",null,[e("tr",null,[e("th",null,"Block"),e("th",null,"Kurs"),e("th",null,"Präferenz")])],-1)),e("tbody",null,[(l(!0),s(h,null,f(c.weeklyPlan,a=>(l(),s("tr",{key:a.blockLabel},[e("td",null,r(a.blockLabel),1),e("td",null,r(a.courseName),1),e("td",null,[e("span",{class:N({"text-muted":a.preferenceIndex===-1,"fw-bold":a.preferenceIndex===0})},r(a.preferenceIndex===-1?"PAUSE":a.preferenceIndex+1),3)])]))),128))])])]))),128))])):x("",!0)]))])}}};export{E as default};
