import{_ as f}from"./Cddl4Hkb.js";import{e as v,z as k,r as u,i as x,P as w,c as n,a as e,j as C,h as a,t as d,F as P,l as A,o as s,d as b,U as B,w as F}from"./ByQSfdmx.js";import{_ as N}from"./DlAUqK2U.js";const L={class:"container-fluid py-3"},E={class:"d-flex align-items-center justify-content-between mb-3"},I=["disabled"],U={key:0},V={key:1,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},j={key:0,class:"alert alert-danger",role:"alert"},D={key:1,class:"text-center py-5"},K={key:2,class:"alert alert-success",role:"alert"},M={key:3,class:"card"},R={class:"list-group list-group-flush"},$={class:"flex-fill"},z={class:"fw-semibold"},S={class:"small text-muted mt-1"},T={class:"badge bg-danger-subtle text-danger-emphasis border border-danger-subtle"},q={class:"ms-2"},G={class:"ms-md-3"},H={key:1,class:"btn btn-outline-secondary btn-sm",disabled:"",title:"Für diesen Problemtyp ist noch keine Aktion hinterlegt."},J=v({__name:"problems",setup(O){const{$authFetch:p}=k(),c=u([]),i=u(!0),l=u(null),h={notEnoughCourses:"nicht genügend Kurse"};function m(t){switch(t.type){case"notEnoughCourses":return`/admin/users/${encodeURIComponent(t.id)}`;default:return null}}const g=x(()=>c.value.length>0);async function _(){i.value=!0,l.value=null;try{const t=await p("/problems");c.value=Array.isArray(t)?t:[]}catch(t){l.value=(t==null?void 0:t.message)??"Unbekannter Fehler beim Laden"}finally{i.value=!1}}return w(_),(t,r)=>{const y=f;return s(),n("div",L,[e("div",E,[r[0]||(r[0]=e("h1",{class:"h4 mb-0"},"Belegungsprobleme",-1)),e("button",{class:"btn btn-outline-secondary btn-sm",onClick:_,disabled:a(i)},[a(i)?(s(),n("span",V)):(s(),n("span",U,"Neu laden"))],8,I)]),a(l)?(s(),n("div",j,d(a(l)),1)):C("",!0),a(i)&&!a(l)?(s(),n("div",D,r[1]||(r[1]=[e("div",{class:"spinner-border",role:"status","aria-hidden":"true"},null,-1),e("div",{class:"mt-2"},"Lade Probleme …",-1)]))):!a(g)&&!a(l)?(s(),n("div",K," Aktuell sind keine Probleme vorhanden. ")):(s(),n("div",M,[e("div",R,[(s(!0),n(P,null,A(a(c),o=>(s(),n("div",{key:o.id+":"+o.type+":"+o.description,class:"list-group-item d-flex flex-column flex-md-row align-items-start align-items-md-center gap-2"},[e("div",$,[e("div",z,d(o.description),1),e("div",S,[e("span",T,d(h[o.type]??o.type),1),e("span",q,[r[2]||(r[2]=b("Problem-ID: ")),e("code",null,d(o.id),1)])])]),e("div",G,[m(o)?(s(),B(y,{key:0,to:m(o),class:"btn btn-primary btn-sm"},{default:F(()=>r[3]||(r[3]=[b(" Beheben ")])),_:2},1032,["to"])):(s(),n("button",H," Keine Aktion verfügbar "))])]))),128))])]))])}}}),Y=N(J,[["__scopeId","data-v-0bacb900"]]);export{Y as default};
