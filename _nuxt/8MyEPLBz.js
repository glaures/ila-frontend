import{q as _,r as i,s as x,c as s,a as e,v as k,d as P,t as r,F as h,m as p,o as a,p as N}from"./DUJt4BQQ.js";const A={class:"p-4"},B={key:0,class:"text-muted"},L={key:1},V={class:"mb-2"},w=["disabled"],C={key:0,class:"mt-4"},F={class:"table table-sm table-bordered mt-2 mb-0"},f="http://localhost:8080",E={__name:"assign",setup(I){const{$authFetch:m}=_(),o=i(null),b=i(!0),d=i(!1),n=i(null);async function g(){try{o.value=await m(f+"/periods/current")}catch(u){console.error(u)}finally{b.value=!1}}async function y(){var u;if((u=o.value)!=null&&u.id){d.value=!0,n.value=null;try{n.value=await m(`${f}/assign/${o.value.id}`,{method:"POST"})}catch(t){n.value="Fehler: "+t.message}finally{d.value=!1}}}return x(g),(u,t)=>{var v;return a(),s("div",A,[t[3]||(t[3]=e("h1",{class:"h4 mb-4"},"Kursvergabe starten",-1)),b.value?(a(),s("div",B,"Lade aktuelle Phase...")):(a(),s("div",L,[e("p",V,[t[0]||(t[0]=P(" Aktuelle Phase: ")),e("strong",null,r(((v=o.value)==null?void 0:v.name)||"Unbekannt"),1)]),e("button",{onClick:y,disabled:d.value,class:"btn btn-primary mb-4"},r(d.value?"Vergabe läuft...":"Kursvergabe starten"),9,w),n.value&&n.value.students?(a(),s("div",C,[t[2]||(t[2]=e("h2",{class:"h5 mb-3"},"Vergabeübersicht",-1)),(a(!0),s(h,null,p(n.value.students,c=>(a(),s("div",{key:c.studentName,class:"mb-4 border rounded p-3 bg-light"},[e("h5",null,r(c.studentName),1),e("table",F,[t[1]||(t[1]=e("thead",null,[e("tr",null,[e("th",null,"Block"),e("th",null,"Kurs"),e("th",null,"Präferenz")])],-1)),e("tbody",null,[(a(!0),s(h,null,p(c.weeklyPlan,l=>(a(),s("tr",{key:l.blockLabel},[e("td",null,r(l.blockLabel),1),e("td",null,r(l.courseName),1),e("td",null,[e("span",{class:N({"text-muted":l.preferenceIndex===-1,"fw-bold":l.preferenceIndex===0})},r(l.preferenceIndex===-1?"PAUSE":l.preferenceIndex+1),3)])]))),128))])])]))),128))])):k("",!0)]))])}}};export{E as default};
