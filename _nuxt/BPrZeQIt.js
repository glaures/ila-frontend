import{_ as k}from"./2swrc4vD.js";import{u as x}from"./C1OEu8jL.js";import{e as w,i as C,k as _,r as b,n as P,c as n,a as e,h as i,F as A,s as B,o as s,t as c,d as p,H as F,w as I,_ as N}from"./Tj1Bfx1J.js";const L={class:"container-fluid py-3"},E={class:"d-flex align-items-center justify-content-between mb-3"},S=["disabled"],$={key:0},D={key:1,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},K={key:0,class:"text-center py-5"},R={key:1,class:"alert alert-success",role:"alert"},V={key:2,class:"card"},j={class:"list-group list-group-flush"},H={class:"flex-fill"},T={class:"fw-semibold"},U={class:"small text-muted mt-1"},q={class:"badge bg-danger-subtle text-danger-emphasis border border-danger-subtle"},z={class:"ms-2"},G={class:"ms-md-3"},J={key:1,class:"btn btn-outline-secondary btn-sm",disabled:"",title:"Für diesen Problemtyp ist noch keine Aktion hinterlegt."},M=w({__name:"problems",setup(O){const{$authFetch:h}=C(),f=x(),l=_(()=>f.selectedId),d=b([]),r=b(!0),y={notEnoughCourses:"nicht genügend Kurse"};function u(o){switch(o.type){case"notEnoughCourses":return`/admin/users/${encodeURIComponent(o.id)}`;default:return null}}const v=_(()=>d.value.length>0);async function m(){if(!l.value){r.value=!1;return}r.value=!0;try{const o=await h(`/problems?period-id=${l.value}`);d.value=Array.isArray(o)?o:[]}finally{r.value=!1}}return P(l,o=>{o&&m()},{immediate:!0}),(o,a)=>{const g=k;return s(),n("div",L,[e("div",E,[a[0]||(a[0]=e("h1",{class:"h4 mb-0"},"Belegungsprobleme",-1)),e("button",{class:"btn btn-outline-secondary btn-sm",onClick:m,disabled:i(r)},[i(r)?(s(),n("span",D)):(s(),n("span",$,"Neu laden"))],8,S)]),i(r)?(s(),n("div",K,a[1]||(a[1]=[e("div",{class:"spinner-border",role:"status","aria-hidden":"true"},null,-1),e("div",{class:"mt-2"},"Lade Probleme …",-1)]))):v.value?(s(),n("div",V,[e("div",j,[(s(!0),n(A,null,B(i(d),t=>(s(),n("div",{key:t.id+":"+t.type+":"+t.description,class:"list-group-item d-flex flex-column flex-md-row align-items-start align-items-md-center gap-2"},[e("div",H,[e("div",T,c(t.description),1),e("div",U,[e("span",q,c(y[t.type]??t.type),1),e("span",z,[a[2]||(a[2]=p("Problem-ID: ")),e("code",null,c(t.id),1)])])]),e("div",G,[u(t)?(s(),F(g,{key:0,to:u(t),class:"btn btn-primary btn-sm"},{default:I(()=>a[3]||(a[3]=[p(" Beheben ")])),_:2},1032,["to"])):(s(),n("button",J," Keine Aktion verfügbar "))])]))),128))])])):(s(),n("div",R," Aktuell sind keine Probleme vorhanden. "))])}}}),Y=N(M,[["__scopeId","data-v-dc935008"]]);export{Y as default};
