var ae=Object.defineProperty;var se=(s,e,l)=>e in s?ae(s,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[e]=l;var P=(s,e,l)=>se(s,typeof e!="symbol"?e+"":e,l);import{D as le,k as W,E as C,i as ne,G as E,H as ie,I as re,J as oe,K as ue,l as H,L as x,r as U,M as I,N as ce,O as de,h as Z,P as fe,Q as K,R as he,S as me,c as w,o as B,a as h,m as N,y as ve,A,n as L,v as G,F as j,p as q,t as k,b as J,T as ye,U as _e}from"./CJBR_SS8.js";import{_ as ge}from"./DlAUqK2U.js";const De={trailing:!0};function be(s,e=25,l={}){if(l={...De,...l},!Number.isFinite(e))throw new TypeError("Expected `wait` to be a finite number");let t,a,n=[],i,m;const v=(c,r)=>(i=pe(s,c,r),i.finally(()=>{if(i=null,l.trailing&&m&&!a){const p=v(c,m);return m=null,p}}),i);return function(...c){return i?(l.trailing&&(m=c),i):new Promise(r=>{const p=!a&&l.leading;clearTimeout(a),a=setTimeout(()=>{a=null;const u=l.leading?t:v(this,c);for(const D of n)D(u);n=[]},e),p?(t=v(this,c),r(t)):n.push(r)})}}async function pe(s,e,l){return await s.apply(e,l)}const we=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],Be=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Te="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",V=[];class Oe{constructor(){P(this,"_data",new F);P(this,"_hash",new F([...we]));P(this,"_nDataBytes",0);P(this,"_minBufferSize",0)}finalize(e){e&&this._append(e);const l=this._nDataBytes*8,t=this._data.sigBytes*8;return this._data.words[t>>>5]|=128<<24-t%32,this._data.words[(t+64>>>9<<4)+14]=Math.floor(l/4294967296),this._data.words[(t+64>>>9<<4)+15]=l,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}_doProcessBlock(e,l){const t=this._hash.words;let a=t[0],n=t[1],i=t[2],m=t[3],v=t[4],c=t[5],r=t[6],p=t[7];for(let u=0;u<64;u++){if(u<16)V[u]=e[l+u]|0;else{const g=V[u-15],_=(g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3,y=V[u-2],o=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;V[u]=_+V[u-7]+o+V[u-16]}const D=v&c^~v&r,f=a&n^a&i^n&i,b=(a<<30|a>>>2)^(a<<19|a>>>13)^(a<<10|a>>>22),S=(v<<26|v>>>6)^(v<<21|v>>>11)^(v<<7|v>>>25),T=p+S+D+Be[u]+V[u],O=b+f;p=r,r=c,c=v,v=m+T|0,m=i,i=n,n=a,a=T+O|0}t[0]=t[0]+a|0,t[1]=t[1]+n|0,t[2]=t[2]+i|0,t[3]=t[3]+m|0,t[4]=t[4]+v|0,t[5]=t[5]+c|0,t[6]=t[6]+r|0,t[7]=t[7]+p|0}_append(e){typeof e=="string"&&(e=F.fromUtf8(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_process(e){let l,t=this._data.sigBytes/64;e?t=Math.ceil(t):t=Math.max((t|0)-this._minBufferSize,0);const a=t*16,n=Math.min(a*4,this._data.sigBytes);if(a){for(let i=0;i<a;i+=16)this._doProcessBlock(this._data.words,i);l=this._data.words.splice(0,a),this._data.sigBytes-=n}return new F(l,n)}}class F{constructor(e,l){P(this,"words");P(this,"sigBytes");e=this.words=e||[],this.sigBytes=l===void 0?e.length*4:l}static fromUtf8(e){const l=unescape(encodeURIComponent(e)),t=l.length,a=[];for(let n=0;n<t;n++)a[n>>>2]|=(l.charCodeAt(n)&255)<<24-n%4*8;return new F(a,t)}toBase64(){const e=[];for(let l=0;l<this.sigBytes;l+=3){const t=this.words[l>>>2]>>>24-l%4*8&255,a=this.words[l+1>>>2]>>>24-(l+1)%4*8&255,n=this.words[l+2>>>2]>>>24-(l+2)%4*8&255,i=t<<16|a<<8|n;for(let m=0;m<4&&l*8+m*6<this.sigBytes*8;m++)e.push(Te.charAt(i>>>6*(3-m)&63))}return e.join("")}concat(e){if(this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4),this.sigBytes%4)for(let l=0;l<e.sigBytes;l++){const t=e.words[l>>>2]>>>24-l%4*8&255;this.words[this.sigBytes+l>>>2]|=t<<24-(this.sigBytes+l)%4*8}else for(let l=0;l<e.sigBytes;l+=4)this.words[this.sigBytes+l>>>2]=e.words[l>>>2];this.sigBytes+=e.sigBytes}}function Ce(s){return new Oe().finalize(s).toBase64()}function M(s){return Ce(le(s))}const Se=Symbol.for("nuxt:client-only"),ke=s=>s==="defer"||s===!1;function Ee(...s){var D;const e=typeof s[s.length-1]=="string"?s.pop():void 0;typeof s[0]!="string"&&typeof s[0]!="object"&&!(typeof s[0]=="function"&&typeof s[1]=="function")&&s.unshift(e);let[l,t,a={}]=s;const n=W(()=>C(l));if(typeof n.value!="string")throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if(typeof t!="function")throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const i=ne();a.server??(a.server=!0),a.default??(a.default=Ve),a.getCachedData??(a.getCachedData=te),a.lazy??(a.lazy=!1),a.immediate??(a.immediate=!0),a.deep??(a.deep=E.deep),a.dedupe??(a.dedupe="cancel"),a._functionName,i._asyncData[n.value];const m=a.getCachedData(n.value,i,{cause:"initial"});(D=i._asyncData[n.value])!=null&&D._init||(i._asyncData[n.value]=Q(i,n.value,t,a,m));const v=i._asyncData[n.value];v._deps++;const c=()=>i._asyncData[n.value].execute({cause:"initial",dedupe:a.dedupe}),r=a.server!==!1&&i.payload.serverRendered;{let f=function(g){const _=i._asyncData[g];_!=null&&_._deps&&(_._deps--,_._deps===0&&(_==null||_._off()))};const b=ie();if(b&&r&&a.immediate&&!b.sp&&(b.sp=[]),b&&!b._nuxtOnBeforeMountCbs){b._nuxtOnBeforeMountCbs=[];const g=b._nuxtOnBeforeMountCbs;re(()=>{g.forEach(_=>{_()}),g.splice(0,g.length)}),oe(()=>g.splice(0,g.length))}const S=b&&(b._nuxtClientOnly||ue(Se,!1));r&&i.isHydrating&&(v.error.value||m!=null)?(v.pending.value=!1,v.status.value=v.error.value?"error":"success"):b&&!S&&(i.payload.serverRendered&&i.isHydrating||a.lazy)&&a.immediate?b._nuxtOnBeforeMountCbs.push(c):a.immediate&&c();const T=fe();if(a.watch){const g=H(a.watch,()=>{v._execute({cause:"watch",dedupe:a.dedupe})},{flush:"post"});T&&x(()=>g())}const O=H(n,(g,_)=>{var o,d;const y=((o=i._asyncData[_])==null?void 0:o.data.value)!==E.value;_&&f(_),(d=i._asyncData[g])!=null&&d._init||(i._asyncData[g]=Q(i,g,t,a,a.getCachedData(g,i,{cause:"initial"}))),i._asyncData[g]._deps++,(a.immediate||y)&&i._asyncData[g].execute({cause:"initial",dedupe:a.dedupe})},{flush:"sync"});T&&x(()=>{O(),f(n.value)})}const p={data:R(()=>{var f;return(f=i._asyncData[n.value])==null?void 0:f.data}),pending:R(()=>{var f;return(f=i._asyncData[n.value])==null?void 0:f.pending}),status:R(()=>{var f;return(f=i._asyncData[n.value])==null?void 0:f.status}),error:R(()=>{var f;return(f=i._asyncData[n.value])==null?void 0:f.error}),refresh:(...f)=>i._asyncData[n.value].execute(...f),execute:(...f)=>i._asyncData[n.value].execute(...f),clear:()=>ee(i,n.value)},u=Promise.resolve(i._asyncDataPromises[n.value]).then(()=>p);return Object.assign(u,p),u}function R(s){return W({get(){var e;return(e=s())==null?void 0:e.value},set(e){const l=s();l&&(l.value=e)}})}function ee(s,e){e in s.payload.data&&(s.payload.data[e]=void 0),e in s.payload._errors&&(s.payload._errors[e]=E.errorValue),s._asyncData[e]&&(s._asyncData[e].data.value=void 0,s._asyncData[e].error.value=E.errorValue,s._asyncData[e].pending.value=!1,s._asyncData[e].status.value="idle"),e in s._asyncDataPromises&&(s._asyncDataPromises[e]&&(s._asyncDataPromises[e].cancelled=!0),s._asyncDataPromises[e]=void 0)}function Pe(s,e){const l={};for(const t of e)l[t]=s[t];return l}function Q(s,e,l,t,a){var p;(p=s.payload._errors)[e]??(p[e]=E.errorValue);const n=t.getCachedData!==te,i=l,m=t.deep?U:I,v=a!=null,c=s.hook("app:data:refresh",async u=>{(!u||u.includes(e))&&await r.execute({cause:"refresh:hook"})}),r={data:m(v?a:t.default()),pending:I(!v),error:ce(s.payload._errors,e),status:I("idle"),execute:(u={})=>{if(s._asyncDataPromises[e]){if(ke(u.dedupe??t.dedupe))return s._asyncDataPromises[e];s._asyncDataPromises[e].cancelled=!0}if(u.cause==="initial"||s.isHydrating){const f=u.cause==="initial"?a:t.getCachedData(e,s,{cause:u.cause??"refresh:manual"});if(f!=null)return s.payload.data[e]=r.data.value=f,r.error.value=E.errorValue,r.status.value="success",Promise.resolve(f)}r.pending.value=!0,r.status.value="pending";const D=new Promise((f,b)=>{try{f(i(s))}catch(S){b(S)}}).then(async f=>{if(D.cancelled)return s._asyncDataPromises[e];let b=f;t.transform&&(b=await t.transform(f)),t.pick&&(b=Pe(b,t.pick)),s.payload.data[e]=b,r.data.value=b,r.error.value=E.errorValue,r.status.value="success"}).catch(f=>{if(D.cancelled)return s._asyncDataPromises[e];r.error.value=de(f),r.data.value=Z(t.default()),r.status.value="error"}).finally(()=>{D.cancelled||(r.pending.value=!1,delete s._asyncDataPromises[e])});return s._asyncDataPromises[e]=D,s._asyncDataPromises[e]},_execute:be((...u)=>r.execute(...u),0,{leading:!0}),_default:t.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{c(),r._init=!1,n||(ee(s,e),r.execute=()=>Promise.resolve(),r.data.value=E.value)}};return r}const Ve=()=>E.value,te=(s,e,l)=>{if(e.isHydrating)return e.payload.data[s];if(l.cause!=="refresh:manual"&&l.cause!=="refresh:hook")return e.static.data[s]};function z(s,e,l){const[t={},a]=typeof e=="string"?[{},e]:[e,l],n=W(()=>C(s)),i=W(()=>C(t.key)||"$f"+M([a,typeof n.value=="string"?n.value:"",...Ue(t)]));if(!t.baseURL&&typeof n.value=="string"&&n.value[0]==="/"&&n.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:m,lazy:v,default:c,transform:r,pick:p,watch:u,immediate:D,getCachedData:f,deep:b,dedupe:S,...T}=t,O=K({...he,...T,cache:typeof t.cache=="boolean"?void 0:t.cache}),g={server:m,lazy:v,default:c,transform:r,pick:p,immediate:D,getCachedData:f,deep:b,dedupe:S,watch:u===!1?[]:[...u||[],O]};if(!D){let o=function(){g.immediate=!0};H(i,o,{flush:"sync",once:!0}),H([...u||[],O],o,{flush:"sync",once:!0})}let _;return Ee(u===!1?i.value:i,()=>{var Y;(Y=_==null?void 0:_.abort)==null||Y.call(_,new DOMException("Request aborted as another request to the same endpoint was initiated.","AbortError")),_=typeof AbortController<"u"?new AbortController:{};const o=C(t.timeout);let d;return o&&(d=setTimeout(()=>_.abort(new DOMException("Request aborted due to timeout.","AbortError")),o),_.signal.onabort=()=>clearTimeout(d)),(t.$fetch||globalThis.$fetch)(n.value,{signal:_.signal,...O}).finally(()=>{clearTimeout(d)})},g)}function Ue(s){var l;const e=[((l=C(s.method))==null?void 0:l.toUpperCase())||"GET",C(s.baseURL)];for(const t of[s.params||s.query]){const a=C(t);if(!a)continue;const n={};for(const[i,m]of Object.entries(a))n[C(i)]=C(m);e.push(n)}if(s.body){const t=C(s.body);if(!t)e.push(M(t));else if(t instanceof ArrayBuffer)e.push(M(Object.fromEntries([...new Uint8Array(t).entries()].map(([a,n])=>[a,n.toString()]))));else if(t instanceof FormData){const a={};for(const n of t.entries()){const[i,m]=n;a[i]=m instanceof File?m.name:m}e.push(M(a))}else if(me(t))e.push(M(K(t)));else try{e.push(M(t))}catch{console.warn("[useFetch] Failed to hash body",t)}}return e}const Me=["value","placeholder"],Fe={key:0,class:"invalid-feedback"},We={__name:"TimeInput",props:{modelValue:String,placeholder:{type:String,default:"HH:mm"},required:{type:Boolean,default:!1}},setup(s){const e=s,l=W(()=>!e.modelValue&&!e.required?!0:/^([01]\d|2[0-3]):[0-5]\d$/.test(e.modelValue));return(t,a)=>(B(),w("div",null,[h("input",{value:s.modelValue,onInput:a[0]||(a[0]=n=>t.$emit("update:modelValue",n.target.value)),type:"text",class:ve(["form-control",{"is-invalid":!l.value&&s.modelValue}]),placeholder:s.placeholder},null,42,Me),!l.value&&s.modelValue?(B(),w("div",Fe," Bitte eine gültige Uhrzeit im Format HH:mm eingeben. ")):N("",!0)]))}},X=ge(We,[["__scopeId","data-v-e6a2fb3a"]]),$e={class:"mb-4"},ze=["value"],Re={key:0,class:"alert alert-warning"},Ne={key:1},He={class:"table table-striped align-middle"},Ie=["onClick"],Le=["onClick"],je={class:"col-md-4"},qe=["value"],Ye={class:"col-md-3"},xe={class:"col-md-3"},Ae={class:"col-md-2 d-flex align-items-end"},Ge={class:"form-check"},Je=["disabled"],Qe={class:"col-12"},Xe={type:"submit",class:"btn btn-primary"},Ze={key:0,class:"alert alert-success mt-3"},Ke={key:1,class:"alert alert-danger mt-3"},st={__name:"bloecke_old",async setup(s){let e,l;const t={MONDAY:"Montag",TUESDAY:"Dienstag",WEDNESDAY:"Mittwoch",THURSDAY:"Donnerstag",FRIDAY:"Freitag",SATURDAY:"Samstag",SUNDAY:"Sonntag"},{data:a,refresh:n}=([e,l]=A(()=>z("http://localhost:8080/blocks","$C2Qfxr8NUv")),e=await e,l(),e),{data:i}=([e,l]=A(()=>z("http://localhost:8080/periods","$nAuYW65QUO")),e=await e,l(),e),m=U(null),v=W(()=>a.value.filter(y=>y.periodId===m.value)),c=U({dayOfWeek:"MONDAY",startTime:"",endTime:"",allDays:!1}),r=U(!1),p=U(null),u=U(""),D=U(""),f=y=>t[y]||y,b=y=>{c.value={dayOfWeek:y.dayOfWeek,startTime:y.startTime,endTime:y.endTime,allDays:!1},p.value=y.id,r.value=!0,u.value="",D.value=""},S=()=>{T()},T=()=>{c.value={dayOfWeek:"MONDAY",startTime:"",endTime:"",allDays:!1},r.value=!1,p.value=null},O=y=>/^([01]\d|2[0-3]):[0-5]\d$/.test(y),g=async()=>{var o;if(u.value="",D.value="",!m.value){D.value="Bitte wähle eine Phase aus.";return}if(!c.value.dayOfWeek){D.value="Bitte einen Wochentag auswählen.";return}if(!O(c.value.startTime)){D.value="Startzeit ist ungültig oder fehlt (Format HH:mm).";return}if(!O(c.value.endTime)){D.value="Endzeit ist ungültig oder fehlt (Format HH:mm).";return}if(c.value.startTime>=c.value.endTime){D.value="Die Startzeit muss vor der Endzeit liegen.";return}const y={id:r.value?p.value:void 0,periodId:m.value,dayOfWeek:c.value.dayOfWeek,startTime:c.value.startTime,endTime:c.value.endTime};!r.value&&c.value.allDays&&(y.applyToAllDays=!0),r.value||delete y.id;try{r.value?(await z(`http://localhost:8080/blocks/${p.value}`,{method:"PUT",body:y},"$HCHv6XK2Px"),u.value="Block aktualisiert.",await n()):(await z("http://localhost:8080/blocks",{method:"POST",body:y},"$SlLXBJcOpy"),u.value=c.value.allDays?"Blöcke für alle Wochentage erstellt.":"Block angelegt.",await n()),T()}catch(d){D.value=((o=d==null?void 0:d.data)==null?void 0:o.message)||"Fehler beim Speichern."}},_=async y=>{var o;if(confirm(`Block am ${f(y.dayOfWeek)} wirklich löschen?`))try{await z(`http://localhost:8080/blocks/${y.id}`,{method:"DELETE"},"$euJMqDMmh6"),u.value="Block gelöscht.",await n()}catch(d){D.value=((o=d==null?void 0:d.data)==null?void 0:o.message)||"Fehler beim Löschen."}};return(y,o)=>(B(),w("div",null,[o[12]||(o[12]=h("h3",null,"Blöcke verwalten",-1)),h("div",$e,[o[5]||(o[5]=h("label",{class:"form-label"},"Phase auswählen:",-1)),L(h("select",{"onUpdate:modelValue":o[0]||(o[0]=d=>m.value=d),class:"form-select"},[(B(!0),w(j,null,q(Z(i),d=>(B(),w("option",{key:d.id,value:d.id},k(d.name),9,ze))),128))],512),[[G,m.value]])]),m.value?(B(),w("div",Ne,[h("table",He,[o[6]||(o[6]=h("thead",null,[h("tr",null,[h("th",null,"Wochentag"),h("th",null,"Uhrzeit"),h("th",null,"Aktionen")])],-1)),h("tbody",null,[(B(!0),w(j,null,q(v.value,d=>(B(),w("tr",{key:d.id},[h("td",null,k(f(d.dayOfWeek)),1),h("td",null,k(d.startTime)+" – "+k(d.endTime),1),h("td",null,[h("button",{class:"btn btn-sm btn-outline-primary me-2",onClick:$=>b(d)},"Bearbeiten",8,Ie),h("button",{class:"btn btn-sm btn-outline-danger",onClick:$=>_(d)},"Löschen",8,Le)])]))),128))])]),o[11]||(o[11]=h("hr",null,null,-1)),h("h4",null,k(r.value?"Block bearbeiten":"Neuen Block anlegen"),1),h("form",{onSubmit:_e(g,["prevent"]),class:"row g-3"},[h("div",je,[o[7]||(o[7]=h("label",{class:"form-label"},"Wochentag",-1)),L(h("select",{"onUpdate:modelValue":o[1]||(o[1]=d=>c.value.dayOfWeek=d),class:"form-select",required:""},[(B(),w(j,null,q(t,(d,$)=>h("option",{key:$,value:$},k(d),9,qe)),64))],512),[[G,c.value.dayOfWeek]])]),h("div",Ye,[o[8]||(o[8]=h("label",{class:"form-label"},"Startzeit",-1)),J(X,{modelValue:c.value.startTime,"onUpdate:modelValue":o[2]||(o[2]=d=>c.value.startTime=d),required:""},null,8,["modelValue"])]),h("div",xe,[o[9]||(o[9]=h("label",{class:"form-label"},"Endzeit",-1)),J(X,{modelValue:c.value.endTime,"onUpdate:modelValue":o[3]||(o[3]=d=>c.value.endTime=d),required:""},null,8,["modelValue"])]),h("div",Ae,[h("div",Ge,[L(h("input",{"onUpdate:modelValue":o[4]||(o[4]=d=>c.value.allDays=d),class:"form-check-input",type:"checkbox",id:"allDaysCheck",disabled:r.value},null,8,Je),[[ye,c.value.allDays]]),o[10]||(o[10]=h("label",{class:"form-check-label",for:"allDaysCheck"},"Für alle Wochentage",-1))])]),h("div",Qe,[h("button",Xe,k(r.value?"Speichern":"Anlegen"),1),r.value?(B(),w("button",{key:0,type:"button",class:"btn btn-secondary ms-2",onClick:S}," Abbrechen ")):N("",!0)])],32),u.value?(B(),w("div",Ze,k(u.value),1)):N("",!0),D.value?(B(),w("div",Ke,k(D.value),1)):N("",!0)])):(B(),w("div",Re," Bitte wähle zuerst eine Phase aus. "))]))}};export{st as default};
