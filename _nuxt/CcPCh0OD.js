const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DTeB4Gn8.js","./entry.Cy85P2aQ.css"])))=>i.map(i=>d[i]);
import{at as S,I as u}from"./DTeB4Gn8.js";const s="admin.periodId",p=S("periodContext",{state:()=>({periods:[],selectedId:null,loading:!1,initialized:!1}),getters:{selectedPeriod(e){return e.periods.find(i=>i.id===e.selectedId)??null}},actions:{async loadPeriods(e){var i;if(!this.loading){this.loading=!0;try{const{useErrorStore:t}=await u(async()=>{const{useErrorStore:o}=await import("./DTeB4Gn8.js").then(h=>h.aL);return{useErrorStore:o}},__vite__mapDeps([0,1]),import.meta.url),c=t(),a=await e("/periods");this.periods=Array.isArray(a)?a:[];const d=Number(localStorage.getItem(s)??""),r=this.periods.find(o=>o.id===d),n=this.periods.find(o=>o.current),l=this.periods[0];this.selectedId=(r==null?void 0:r.id)??(n==null?void 0:n.id)??(l==null?void 0:l.id)??null,this.selectedId!=null&&localStorage.setItem(s,String(this.selectedId)),this.initialized=!0}catch(t){const{useErrorStore:c}=await u(async()=>{const{useErrorStore:d}=await import("./DTeB4Gn8.js").then(r=>r.aL);return{useErrorStore:d}},__vite__mapDeps([0,1]),import.meta.url);c().show(((i=t==null?void 0:t.data)==null?void 0:i.message)??"Es ist ein interner Fehler aufgetreten: "+t)}finally{this.loading=!1}}},setSelected(e){this.selectedId=e,e==null?localStorage.removeItem(s):localStorage.setItem(s,String(e))}}});export{p as u};
