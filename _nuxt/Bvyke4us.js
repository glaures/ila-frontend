import{_ as x}from"./BWAt2w0G.js";import{u as w}from"./DXNwklRK.js";import{w as A}from"./BA3RTNws.js";import{e as C,i as T,k as b,r as p,n as S,c as r,a as s,h as i,F as B,s as P,o,t as u,d as f,H as D,w as F,_ as I}from"./DNoNEisY.js";const L={class:"container-fluid py-3"},N={class:"d-flex align-items-center justify-content-between mb-3"},O=["disabled"],$={key:0},E={key:1,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},K={key:0,class:"text-center py-5"},R={key:1,class:"alert alert-success",role:"alert"},W={key:2,class:"card"},j={class:"list-group list-group-flush"},U={class:"flex-fill"},V={class:"fw-semibold"},H={class:"small text-muted mt-1"},q={class:"badge bg-danger-subtle text-danger-emphasis border border-danger-subtle"},z={class:"ms-2"},G={class:"ms-md-3"},J={key:1,class:"btn btn-outline-secondary btn-sm",disabled:"",title:"Für diesen Problemtyp ist noch keine Aktion hinterlegt."},M=C({__name:"problems",setup(Q){const{$authFetch:h}=T(),y=w(),l=b(()=>y.selectedId),d=p([]),a=p(!0),g={notEnoughCourses:"nicht genügend Kurse",moreThan1AtTheSameDayOfWeek:"mehrere Kurse am selben Tag"};function m(e){switch(e.type){case"notEnoughCourses":return`/admin/users/${encodeURIComponent(e.id)}`;case"moreThan1AtTheSameDayOfWeek":return`/admin/user-assignments/${encodeURIComponent(e.id)}`;default:return null}}function v(e){if(e.type==="moreThan1AtTheSameDayOfWeek"){let t=e.description;for(const[c,n]of Object.entries(A))t=t.replace(c,n);return t}return e.description}const k=b(()=>d.value.length>0);async function _(){if(!l.value){a.value=!1;return}a.value=!0;try{const e=await h(`/problems?period-id=${l.value}`);d.value=Array.isArray(e)?e:[]}finally{a.value=!1}}return S(l,e=>{e&&_()},{immediate:!0}),(e,t)=>{const c=x;return o(),r("div",L,[s("div",N,[t[0]||(t[0]=s("h1",{class:"h4 mb-0"},"Belegungsprobleme",-1)),s("button",{class:"btn btn-outline-secondary btn-sm",onClick:_,disabled:i(a)},[i(a)?(o(),r("span",E)):(o(),r("span",$,"Neu laden"))],8,O)]),i(a)?(o(),r("div",K,t[1]||(t[1]=[s("div",{class:"spinner-border",role:"status","aria-hidden":"true"},null,-1),s("div",{class:"mt-2"},"Lade Probleme …",-1)]))):k.value?(o(),r("div",W,[s("div",j,[(o(!0),r(B,null,P(i(d),n=>(o(),r("div",{key:n.id+":"+n.type+":"+n.description,class:"list-group-item d-flex flex-column flex-md-row align-items-start align-items-md-center gap-2"},[s("div",U,[s("div",V,u(v(n)),1),s("div",H,[s("span",q,u(g[n.type]??n.type),1),s("span",z,[t[2]||(t[2]=f("Schüler:in: ")),s("code",null,u(n.id),1)])])]),s("div",G,[m(n)?(o(),D(c,{key:0,to:m(n),class:"btn btn-primary btn-sm"},{default:F(()=>t[3]||(t[3]=[f(" Beheben ")])),_:2},1032,["to"])):(o(),r("button",J," Keine Aktion verfügbar "))])]))),128))])])):(o(),r("div",R," Aktuell sind keine Probleme vorhanden. "))])}}}),se=I(M,[["__scopeId","data-v-5ed75bf5"]]);export{se as default};
