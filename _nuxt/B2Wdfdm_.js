import{e as x,i as w,j as N,g as S,r as m,m as T,c as n,a as t,q as p,x as $,h as r,I as C,F as b,s as _,o as l,t as i,y as A,B,_ as M}from"./Nngi8v_b.js";const F={class:"instructor-attendance"},K={class:"card mb-3"},D={class:"card-body"},V=["value"],L={key:0,class:"attendee-list"},O={class:"card-body"},U={class:"d-flex justify-content-between align-items-center"},W={class:"mb-1"},j={class:"text-muted"},z={class:"form-check form-switch"},E=["id","onUpdate:modelValue","onChange"],I=["for"],q={key:1,class:"text-center py-5"},R={key:2,class:"text-center py-5"},G=x({__name:"attendance",setup(H){const{$authFetch:J}=w(),v=N(),u=S(),h=m([]),o=m(null),d=m([]),c=m(!1);T(async()=>{var a;try{c.value=!0,h.value=[{id:1,name:"Basketball",block:{id:1,dayOfWeek:1,startTime:"14:00",endTime:"15:30"}},{id:2,name:"Töpfern",block:{id:2,dayOfWeek:3,startTime:"14:00",endTime:"15:30"}}]}catch(e){u.show(((a=e==null?void 0:e.data)==null?void 0:a.message)??"Fehler beim Laden der Kurse")}finally{c.value=!1}});const y=async()=>{var a;if(!o.value){d.value=[];return}try{c.value=!0,d.value=[{userName:"max.mustermann",firstName:"Max",lastName:"Mustermann",grade:9,present:!0},{userName:"anna.schmidt",firstName:"Anna",lastName:"Schmidt",grade:10,present:!0},{userName:"tom.mueller",firstName:"Tom",lastName:"Müller",grade:9,present:!0}]}catch(e){u.show(((a=e==null?void 0:e.data)==null?void 0:a.message)??"Fehler beim Laden der Teilnehmer")}finally{c.value=!1}},g=async a=>{var e;try{v.success(`${a.firstName} ${a.lastName} als ${a.present?"anwesend":"abwesend"} markiert`)}catch(s){a.present=!a.present,u.show(((e=s==null?void 0:s.data)==null?void 0:e.message)??"Fehler beim Speichern der Anwesenheit")}},k=a=>`${["So","Mo","Di","Mi","Do","Fr","Sa"][a.dayOfWeek]} ${a.startTime.slice(0,5)}-${a.endTime.slice(0,5)}`;return(a,e)=>(l(),n("div",F,[e[5]||(e[5]=t("h2",{class:"h5 mb-3"},"Abwesenheiten melden",-1)),t("div",K,[t("div",D,[e[2]||(e[2]=t("label",{class:"form-label fw-bold"},"Kurs auswählen:",-1)),p(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>C(o)?o.value=s:null),class:"form-select form-select-lg",onChange:y},[e[1]||(e[1]=t("option",{value:null},"Bitte Kurs wählen...",-1)),(l(!0),n(b,null,_(r(h),s=>(l(),n("option",{key:s.id,value:s},i(s.name)+" - "+i(k(s.block)),9,V))),128))],544),[[$,r(o)]])])]),r(o)&&r(d).length>0?(l(),n("div",L,[(l(!0),n(b,null,_(r(d),s=>(l(),n("div",{class:"card mb-3",key:s.userName},[t("div",O,[t("div",U,[t("div",null,[t("h6",W,i(s.firstName)+" "+i(s.lastName),1),t("small",j,"Klasse "+i(s.grade),1)]),t("div",z,[p(t("input",{class:"form-check-input",type:"checkbox",id:`attendance-${s.userName}`,"onUpdate:modelValue":f=>s.present=f,onChange:f=>g(s),style:{width:"3rem",height:"1.5rem"}},null,40,E),[[A,s.present]]),t("label",{class:"form-check-label ms-2",for:`attendance-${s.userName}`},[t("span",{class:B(s.present?"text-success":"text-danger")},i(s.present?"Anwesend":"Abwesend"),3)],8,I)])])])]))),128))])):r(o)&&r(d).length===0?(l(),n("div",q,e[3]||(e[3]=[t("i",{class:"bi bi-people fs-1 text-muted"},null,-1),t("p",{class:"text-muted mt-3"},"Keine Teilnehmer für diesen Kurs gefunden.",-1)]))):(l(),n("div",R,e[4]||(e[4]=[t("i",{class:"bi bi-arrow-up fs-1 text-muted"},null,-1),t("p",{class:"text-muted mt-3"},"Bitte wählen Sie zunächst einen Kurs aus.",-1)])))]))}}),Q=M(G,[["__scopeId","data-v-beab8bba"]]);export{Q as default};
