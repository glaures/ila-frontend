import{_ as w}from"./Cddl4Hkb.js";import{e as D,z as N,r as u,P as b,c as e,a as s,j as A,t as o,F as i,l as g,o as t,b as M,w as P,d as f}from"./ByQSfdmx.js";const C={class:"container py-4"},E={key:0,class:"alert alert-danger"},F={key:1,class:"text-center"},S={key:2,class:"row g-3"},T={class:"card h-100"},I={class:"card-header d-flex justify-content-between align-items-center"},Y={class:"text-muted d-block"},B={class:"card-body"},L={class:"fw-semibold"},O={key:0},V={class:"list-group list-group-numbered"},j={class:"badge bg-light text-dark"},z={key:1,class:"text-muted"},H={key:2,class:"text-muted"},$=D({__name:"my-assignments",setup(R){const{$authFetch:h}=N(),d=u(!0),l=u(null),_=u([]),y=r=>({MONDAY:"Montag",TUESDAY:"Dienstag",WEDNESDAY:"Mittwoch",THURSDAY:"Donnerstag",FRIDAY:"Freitag"})[r]||r;async function k(){d.value=!0,l.value=null;try{const r=await h("/preferences/overview");_.value=r}catch(r){l.value=r.message||"Fehler beim Laden"}finally{d.value=!1}}return b(k),(r,a)=>{const x=w;return t(),e("div",C,[a[3]||(a[3]=s("h1",{class:"h3 mb-3"},"Meine Kurse",-1)),l.value?(t(),e("div",E,o(l.value),1)):A("",!0),d.value?(t(),e("div",F,a[0]||(a[0]=[s("div",{class:"spinner-border"},null,-1)]))):(t(),e("div",S,[(t(!0),e(i,null,g(_.value,n=>{var m,v,p;return t(),e("div",{key:n.blockId,class:"col-12 col-md-6 col-lg-6"},[s("div",T,[s("div",I,[s("div",null,[s("strong",null,o(y(n.dayOfWeek)),1),s("small",Y,o(n.startTime)+"–"+o(n.endTime),1)]),M(x,{class:"btn btn-sm btn-outline-primary",to:`/preferences/${n.blockId}`},{default:P(()=>a[1]||(a[1]=[f(" Bearbeiten ")])),_:2},1032,["to"])]),s("div",B,[n.status==="ASSIGNED"?(t(),e(i,{key:0},[s("div",L,o((m=n.assignedCourse)==null?void 0:m.name),1),s("div",null,o((v=n.assignedCourse)==null?void 0:v.instructor)+", "+o((p=n.assignedCourse)==null?void 0:p.room),1)],64)):n.status==="OPEN"?(t(),e(i,{key:1},[n.topPreferences.length>0?(t(),e("div",O,[a[2]||(a[2]=s("div",{class:"fw-semibold"},"Top-Präferenzen:",-1)),s("ol",V,[(t(!0),e(i,null,g(n.topPreferences,c=>(t(),e("li",{key:c.id,class:"list-group-item"},[f(o(c.name)+" ",1),s("span",j,"Prio "+o(c.preferenceIndex+1),1)]))),128))])])):(t(),e("div",z," Mittagessen / Hofpause "))],64)):(t(),e("span",H,"Pause gewählt"))])])])}),128))]))])}}});export{$ as default};
