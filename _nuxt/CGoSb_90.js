import{_ as f}from"./D0npWOsR.js";import{e as v,i as k,r as u,k as x,j as C,c as n,a as e,m as w,h as a,t as d,F as A,p as B,o as s,d as b,C as F,w as N}from"./CJBR_SS8.js";import{_ as P}from"./DlAUqK2U.js";const L={class:"container-fluid py-3"},E={class:"d-flex align-items-center justify-content-between mb-3"},I=["disabled"],V={key:0},j={key:1,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},D={key:0,class:"alert alert-danger",role:"alert"},K={key:1,class:"text-center py-5"},M={key:2,class:"alert alert-success",role:"alert"},R={key:3,class:"card"},U={class:"list-group list-group-flush"},$={class:"flex-fill"},S={class:"fw-semibold"},T={class:"small text-muted mt-1"},q={class:"badge bg-danger-subtle text-danger-emphasis border border-danger-subtle"},z={class:"ms-2"},G={class:"ms-md-3"},H={key:1,class:"btn btn-outline-secondary btn-sm",disabled:"",title:"Für diesen Problemtyp ist noch keine Aktion hinterlegt."},J=v({__name:"problems",setup(O){const{$authFetch:p}=k(),c=u([]),i=u(!0),l=u(null),h={notEnoughCourses:"nicht genügend Kurse"};function m(t){switch(t.type){case"notEnoughCourses":return`/admin/users/${encodeURIComponent(t.id)}`;default:return null}}const g=x(()=>c.value.length>0);async function _(){i.value=!0,l.value=null;try{const t=await p("/problems");c.value=Array.isArray(t)?t:[]}catch(t){l.value=(t==null?void 0:t.message)??"Unbekannter Fehler beim Laden"}finally{i.value=!1}}return C(_),(t,r)=>{const y=f;return s(),n("div",L,[e("div",E,[r[0]||(r[0]=e("h1",{class:"h4 mb-0"},"Belegungsprobleme",-1)),e("button",{class:"btn btn-outline-secondary btn-sm",onClick:_,disabled:a(i)},[a(i)?(s(),n("span",j)):(s(),n("span",V,"Neu laden"))],8,I)]),a(l)?(s(),n("div",D,d(a(l)),1)):w("",!0),a(i)&&!a(l)?(s(),n("div",K,r[1]||(r[1]=[e("div",{class:"spinner-border",role:"status","aria-hidden":"true"},null,-1),e("div",{class:"mt-2"},"Lade Probleme …",-1)]))):!a(g)&&!a(l)?(s(),n("div",M," Aktuell sind keine Probleme vorhanden. ")):(s(),n("div",R,[e("div",U,[(s(!0),n(A,null,B(a(c),o=>(s(),n("div",{key:o.id+":"+o.type+":"+o.description,class:"list-group-item d-flex flex-column flex-md-row align-items-start align-items-md-center gap-2"},[e("div",$,[e("div",S,d(o.description),1),e("div",T,[e("span",q,d(h[o.type]??o.type),1),e("span",z,[r[2]||(r[2]=b("Problem-ID: ")),e("code",null,d(o.id),1)])])]),e("div",G,[m(o)?(s(),F(y,{key:0,to:m(o),class:"btn btn-primary btn-sm"},{default:N(()=>r[3]||(r[3]=[b(" Beheben ")])),_:2},1032,["to"])):(s(),n("button",H," Keine Aktion verfügbar "))])]))),128))])]))])}}}),Y=P(J,[["__scopeId","data-v-0bacb900"]]);export{Y as default};
