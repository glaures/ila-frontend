import{_ as h}from"./_I02Y06R.js";import{g as x,q as w,r as u,s as b,c as e,a as s,v as D,t as r,F as i,m as v,o as t,b as N,w as A,d as p}from"./DgJVQ4VW.js";const M={class:"container py-4"},P={key:0,class:"alert alert-danger"},E={key:1,class:"text-center"},F={key:2,class:"row g-3"},S={class:"card h-100"},T={class:"card-header d-flex justify-content-between align-items-center"},I={class:"text-muted d-block"},V={class:"card-body"},Y={key:0},B={class:"list-group list-group-numbered"},C={class:"badge bg-light text-dark"},L={key:1,class:"text-muted"},O={key:2,class:"text-muted"},R=x({__name:"my-assignments",setup(z){const{$authFetch:g}=w(),d=u(!0),l=u(null),m=u([]),f=a=>({MONDAY:"Montag",TUESDAY:"Dienstag",WEDNESDAY:"Mittwoch",THURSDAY:"Donnerstag",FRIDAY:"Freitag"})[a]||a;async function y(){d.value=!0,l.value=null;try{const a=await g("/preferences/overview");m.value=a}catch(a){l.value=a.message||"Fehler beim Laden"}finally{d.value=!1}}return b(y),(a,n)=>{const k=h;return t(),e("div",M,[n[4]||(n[4]=s("h1",{class:"h3 mb-3"},"Meine Kurs-Präferenzen",-1)),l.value?(t(),e("div",P,r(l.value),1)):D("",!0),d.value?(t(),e("div",E,n[0]||(n[0]=[s("div",{class:"spinner-border"},null,-1)]))):(t(),e("div",F,[(t(!0),e(i,null,v(m.value,o=>{var _;return t(),e("div",{key:o.blockId,class:"col-12 col-md-6 col-lg-4"},[s("div",S,[s("div",T,[s("div",null,[s("strong",null,r(f(o.dayOfWeek)),1),s("small",I,r(o.startTime)+"–"+r(o.endTime),1)]),N(k,{class:"btn btn-sm btn-outline-primary",to:`/preferences/${o.blockId}`},{default:A(()=>n[1]||(n[1]=[p(" Bearbeiten ")])),_:2},1032,["to"])]),s("div",V,[o.status==="ASSIGNED"?(t(),e(i,{key:0},[n[2]||(n[2]=s("div",{class:"fw-semibold"},"Vergebener Kurs:",-1)),s("div",null,r((_=o.assignedCourse)==null?void 0:_.name),1)],64)):o.status==="OPEN"?(t(),e(i,{key:1},[o.topPreferences.length>0?(t(),e("div",Y,[n[3]||(n[3]=s("div",{class:"fw-semibold"},"Top-Präferenzen:",-1)),s("ol",B,[(t(!0),e(i,null,v(o.topPreferences,c=>(t(),e("li",{key:c.id,class:"list-group-item"},[p(r(c.name)+" ",1),s("span",C,"Prio "+r(c.preferenceIndex+1),1)]))),128))])])):(t(),e("div",L," Mittagessen / Hofpause "))],64)):(t(),e("span",O,"Pause gewählt"))])])])}),128))]))])}}});export{R as default};
