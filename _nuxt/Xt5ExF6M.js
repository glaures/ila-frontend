var H=Object.defineProperty;var I=(s,e,n)=>e in s?H(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n;var P=(s,e,n)=>I(s,typeof e!="symbol"?e+"":e,n);import{E as $,x as j,G as g,q as G,H as w,I as J,J as Q,K as W,i as x,L as T,M as z,r as X,N as F,O as Y,P as Z,l as K,Q as A,R as L,S as k,T as ee}from"./ASV2cBzq.js";const te={trailing:!0};function ae(s,e=25,n={}){if(n={...te,...n},!Number.isFinite(e))throw new TypeError("Expected `wait` to be a finite number");let t,a,i=[],r,f;const l=(_,c)=>(r=se(s,_,c),r.finally(()=>{if(r=null,n.trailing&&f&&!a){const m=l(_,f);return f=null,m}}),r);return function(..._){return r?(n.trailing&&(f=_),r):new Promise(c=>{const m=!a&&n.leading;clearTimeout(a),a=setTimeout(()=>{a=null;const u=n.leading?t:l(this,_);for(const v of i)v(u);i=[]},e),m?(t=l(this,_),c(t)):i.push(c)})}}async function se(s,e,n){return await s.apply(e,n)}const ne=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],re=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],ie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",O=[];class ce{constructor(){P(this,"_data",new M);P(this,"_hash",new M([...ne]));P(this,"_nDataBytes",0);P(this,"_minBufferSize",0)}finalize(e){e&&this._append(e);const n=this._nDataBytes*8,t=this._data.sigBytes*8;return this._data.words[t>>>5]|=128<<24-t%32,this._data.words[(t+64>>>9<<4)+14]=Math.floor(n/4294967296),this._data.words[(t+64>>>9<<4)+15]=n,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}_doProcessBlock(e,n){const t=this._hash.words;let a=t[0],i=t[1],r=t[2],f=t[3],l=t[4],_=t[5],c=t[6],m=t[7];for(let u=0;u<64;u++){if(u<16)O[u]=e[n+u]|0;else{const h=O[u-15],d=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,b=O[u-2],D=(b<<15|b>>>17)^(b<<13|b>>>19)^b>>>10;O[u]=d+O[u-7]+D+O[u-16]}const v=l&_^~l&c,o=a&i^a&r^i&r,y=(a<<30|a>>>2)^(a<<19|a>>>13)^(a<<10|a>>>22),B=(l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25),p=m+B+v+re[u]+O[u],C=y+o;m=c,c=_,_=l,l=f+p|0,f=r,r=i,i=a,a=p+C|0}t[0]=t[0]+a|0,t[1]=t[1]+i|0,t[2]=t[2]+r|0,t[3]=t[3]+f|0,t[4]=t[4]+l|0,t[5]=t[5]+_|0,t[6]=t[6]+c|0,t[7]=t[7]+m|0}_append(e){typeof e=="string"&&(e=M.fromUtf8(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_process(e){let n,t=this._data.sigBytes/64;e?t=Math.ceil(t):t=Math.max((t|0)-this._minBufferSize,0);const a=t*16,i=Math.min(a*4,this._data.sigBytes);if(a){for(let r=0;r<a;r+=16)this._doProcessBlock(this._data.words,r);n=this._data.words.splice(0,a),this._data.sigBytes-=i}return new M(n,i)}}class M{constructor(e,n){P(this,"words");P(this,"sigBytes");e=this.words=e||[],this.sigBytes=n===void 0?e.length*4:n}static fromUtf8(e){const n=unescape(encodeURIComponent(e)),t=n.length,a=[];for(let i=0;i<t;i++)a[i>>>2]|=(n.charCodeAt(i)&255)<<24-i%4*8;return new M(a,t)}toBase64(){const e=[];for(let n=0;n<this.sigBytes;n+=3){const t=this.words[n>>>2]>>>24-n%4*8&255,a=this.words[n+1>>>2]>>>24-(n+1)%4*8&255,i=this.words[n+2>>>2]>>>24-(n+2)%4*8&255,r=t<<16|a<<8|i;for(let f=0;f<4&&n*8+f*6<this.sigBytes*8;f++)e.push(ie.charAt(r>>>6*(3-f)&63))}return e.join("")}concat(e){if(this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4),this.sigBytes%4)for(let n=0;n<e.sigBytes;n++){const t=e.words[n>>>2]>>>24-n%4*8&255;this.words[this.sigBytes+n>>>2]|=t<<24-(this.sigBytes+n)%4*8}else for(let n=0;n<e.sigBytes;n+=4)this.words[this.sigBytes+n>>>2]=e.words[n>>>2];this.sigBytes+=e.sigBytes}}function oe(s){return new ce().finalize(s).toBase64()}function R(s){return oe($(s))}const ue=Symbol.for("nuxt:client-only"),le=s=>s==="defer"||s===!1;function fe(...s){var v;const e=typeof s[s.length-1]=="string"?s.pop():void 0;typeof s[0]!="string"&&typeof s[0]!="object"&&!(typeof s[0]=="function"&&typeof s[1]=="function")&&s.unshift(e);let[n,t,a={}]=s;const i=j(()=>g(n));if(typeof i.value!="string")throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if(typeof t!="function")throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const r=G();a.server??(a.server=!0),a.default??(a.default=he),a.getCachedData??(a.getCachedData=V),a.lazy??(a.lazy=!1),a.immediate??(a.immediate=!0),a.deep??(a.deep=w.deep),a.dedupe??(a.dedupe="cancel"),a._functionName,r._asyncData[i.value];const f=a.getCachedData(i.value,r,{cause:"initial"});(v=r._asyncData[i.value])!=null&&v._init||(r._asyncData[i.value]=q(r,i.value,t,a,f));const l=r._asyncData[i.value];l._deps++;const _=()=>r._asyncData[i.value].execute({cause:"initial",dedupe:a.dedupe}),c=a.server!==!1&&r.payload.serverRendered;{let o=function(h){const d=r._asyncData[h];d!=null&&d._deps&&(d._deps--,d._deps===0&&(d==null||d._off()))};const y=J();if(y&&c&&a.immediate&&!y.sp&&(y.sp=[]),y&&!y._nuxtOnBeforeMountCbs){y._nuxtOnBeforeMountCbs=[];const h=y._nuxtOnBeforeMountCbs;Q(()=>{h.forEach(d=>{d()}),h.splice(0,h.length)}),W(()=>h.splice(0,h.length))}const B=y&&(y._nuxtClientOnly||x(ue,!1));c&&r.isHydrating&&(l.error.value||f!=null)?(l.pending.value=!1,l.status.value=l.error.value?"error":"success"):y&&!B&&(r.payload.serverRendered&&r.isHydrating||a.lazy)&&a.immediate?y._nuxtOnBeforeMountCbs.push(_):a.immediate&&_();const p=A();if(a.watch){const h=T(a.watch,()=>{l._execute({cause:"watch",dedupe:a.dedupe})},{flush:"post"});p&&z(()=>h())}const C=T(i,(h,d)=>{var D,E;const b=((D=r._asyncData[d])==null?void 0:D.data.value)!==w.value;d&&o(d),(E=r._asyncData[h])!=null&&E._init||(r._asyncData[h]=q(r,h,t,a,a.getCachedData(h,r,{cause:"initial"}))),r._asyncData[h]._deps++,(a.immediate||b)&&r._asyncData[h].execute({cause:"initial",dedupe:a.dedupe})},{flush:"sync"});p&&z(()=>{C(),o(i.value)})}const m={data:S(()=>{var o;return(o=r._asyncData[i.value])==null?void 0:o.data}),pending:S(()=>{var o;return(o=r._asyncData[i.value])==null?void 0:o.pending}),status:S(()=>{var o;return(o=r._asyncData[i.value])==null?void 0:o.status}),error:S(()=>{var o;return(o=r._asyncData[i.value])==null?void 0:o.error}),refresh:(...o)=>r._asyncData[i.value].execute(...o),execute:(...o)=>r._asyncData[i.value].execute(...o),clear:()=>N(r,i.value)},u=Promise.resolve(r._asyncDataPromises[i.value]).then(()=>m);return Object.assign(u,m),u}function S(s){return j({get(){var e;return(e=s())==null?void 0:e.value},set(e){const n=s();n&&(n.value=e)}})}function N(s,e){e in s.payload.data&&(s.payload.data[e]=void 0),e in s.payload._errors&&(s.payload._errors[e]=w.errorValue),s._asyncData[e]&&(s._asyncData[e].data.value=void 0,s._asyncData[e].error.value=w.errorValue,s._asyncData[e].pending.value=!1,s._asyncData[e].status.value="idle"),e in s._asyncDataPromises&&(s._asyncDataPromises[e]&&(s._asyncDataPromises[e].cancelled=!0),s._asyncDataPromises[e]=void 0)}function de(s,e){const n={};for(const t of e)n[t]=s[t];return n}function q(s,e,n,t,a){var m;(m=s.payload._errors)[e]??(m[e]=w.errorValue);const i=t.getCachedData!==V,r=n,f=t.deep?X:F,l=a!=null,_=s.hook("app:data:refresh",async u=>{(!u||u.includes(e))&&await c.execute({cause:"refresh:hook"})}),c={data:f(l?a:t.default()),pending:F(!l),error:Y(s.payload._errors,e),status:F("idle"),execute:(u={})=>{if(s._asyncDataPromises[e]){if(le(u.dedupe??t.dedupe))return s._asyncDataPromises[e];s._asyncDataPromises[e].cancelled=!0}if(u.cause==="initial"||s.isHydrating){const o=u.cause==="initial"?a:t.getCachedData(e,s,{cause:u.cause??"refresh:manual"});if(o!=null)return s.payload.data[e]=c.data.value=o,c.error.value=w.errorValue,c.status.value="success",Promise.resolve(o)}c.pending.value=!0,c.status.value="pending";const v=new Promise((o,y)=>{try{o(r(s))}catch(B){y(B)}}).then(async o=>{if(v.cancelled)return s._asyncDataPromises[e];let y=o;t.transform&&(y=await t.transform(o)),t.pick&&(y=de(y,t.pick)),s.payload.data[e]=y,c.data.value=y,c.error.value=w.errorValue,c.status.value="success"}).catch(o=>{if(v.cancelled)return s._asyncDataPromises[e];c.error.value=Z(o),c.data.value=K(t.default()),c.status.value="error"}).finally(()=>{v.cancelled||(c.pending.value=!1,delete s._asyncDataPromises[e])});return s._asyncDataPromises[e]=v,s._asyncDataPromises[e]},_execute:ae((...u)=>c.execute(...u),0,{leading:!0}),_default:t.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{_(),c._init=!1,i||(N(s,e),c.execute=()=>Promise.resolve(),c.data.value=w.value)}};return c}const he=()=>w.value,V=(s,e,n)=>{if(e.isHydrating)return e.payload.data[s];if(n.cause!=="refresh:manual"&&n.cause!=="refresh:hook")return e.static.data[s]};function De(s,e,n){const[t={},a]=typeof e=="string"?[{},e]:[e,n],i=j(()=>g(s)),r=j(()=>g(t.key)||"$f"+R([a,typeof i.value=="string"?i.value:"",...ye(t)]));if(!t.baseURL&&typeof i.value=="string"&&i.value[0]==="/"&&i.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:f,lazy:l,default:_,transform:c,pick:m,watch:u,immediate:v,getCachedData:o,deep:y,dedupe:B,...p}=t,C=L({...k,...p,cache:typeof t.cache=="boolean"?void 0:t.cache}),h={server:f,lazy:l,default:_,transform:c,pick:m,immediate:v,getCachedData:o,deep:y,dedupe:B,watch:u===!1?[]:[...u||[],C]};if(!v){let D=function(){h.immediate=!0};T(r,D,{flush:"sync",once:!0}),T([...u||[],C],D,{flush:"sync",once:!0})}let d;return fe(u===!1?r.value:r,()=>{var U;(U=d==null?void 0:d.abort)==null||U.call(d,new DOMException("Request aborted as another request to the same endpoint was initiated.","AbortError")),d=typeof AbortController<"u"?new AbortController:{};const D=g(t.timeout);let E;return D&&(E=setTimeout(()=>d.abort(new DOMException("Request aborted due to timeout.","AbortError")),D),d.signal.onabort=()=>clearTimeout(E)),(t.$fetch||globalThis.$fetch)(i.value,{signal:d.signal,...C}).finally(()=>{clearTimeout(E)})},h)}function ye(s){var n;const e=[((n=g(s.method))==null?void 0:n.toUpperCase())||"GET",g(s.baseURL)];for(const t of[s.params||s.query]){const a=g(t);if(!a)continue;const i={};for(const[r,f]of Object.entries(a))i[g(r)]=g(f);e.push(i)}if(s.body){const t=g(s.body);if(!t)e.push(R(t));else if(t instanceof ArrayBuffer)e.push(R(Object.fromEntries([...new Uint8Array(t).entries()].map(([a,i])=>[a,i.toString()]))));else if(t instanceof FormData){const a={};for(const i of t.entries()){const[r,f]=i;a[r]=f instanceof File?f.name:f}e.push(R(a))}else if(ee(t))e.push(R(L(t)));else try{e.push(R(t))}catch{console.warn("[useFetch] Failed to hash body",t)}}return e}export{De as u};
