import{j as i,v as r,c as l,a as h,S as p,o as u}from"./iFMC19Es.js";const d={class:"container py-5 text-center"},m={__name:"auth-redirect",async setup(_){let e,o;const a=i();p();const s=a.query.code;if(s){const n="http://localhost:3000/auth-redirect",t=([e,o]=r(()=>fetch("http://localhost:8080/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:s,redirectUri:n})})),e=await e,o(),e);if(t.ok){const{token:c}=([e,o]=r(()=>t.json()),e=await e,o(),e);localStorage.setItem("jwt",c),window.location.href="/preferences"}else console.error("Login fehlgeschlagen")}return(n,t)=>(u(),l("div",d,t[0]||(t[0]=[h("p",null,"Authentifiziere dichâ€¦",-1)])))}};export{m as default};
